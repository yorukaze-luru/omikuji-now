<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ä»Šæ—¥ã®ãŠã¿ãã˜</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Serif JP', serif;
      background: #fdfaf5;
      color: #333;
      text-align: center;
      padding: 2em 1em;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 0.5em;
    }
    input, button {
      font-size: 1em;
      padding: 0.6em;
      margin: 0.5em;
      width: 90%;
      max-width: 300px;
      box-sizing: border-box;
      font-family: 'Noto Serif JP', serif;
    }
    button {
      background: #b22222;
      color: white;
      border: none;
      border-radius: 5px;
    }
    #result-wrapper {
      perspective: 1000px;
      overflow: hidden;
      height: 0;
      transition: height 0.8s ease;
    }
    #result {
      transform: translateY(-100%);
      opacity: 0;
      transition: transform 0.8s ease, opacity 0.8s ease;
      background: #fff;
      border: 2px solid #8b0000;
      border-radius: 10px;
      padding: 1.5em;
      max-width: 600px;
      margin: 2em auto 0;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    #result.show {
      transform: translateY(0);
      opacity: 1;
    }
    #result-wrapper.open {
      height: auto;
    }
    .fortune-title {
      font-size: 1.6em;
      font-weight: bold;
      margin-bottom: 1em;
      color: #8b0000;
    }
    .fortune-section {
      text-align: left;
      margin-top: 1em;
    }
    .fortune-section h3 {
      margin: 0.5em 0 0.2em;
      font-size: 1.1em;
      color: #b22222;
    }
    .fortune-section p {
      margin: 0;
    }
  </style>
</head>
<body>
  <h1>ğŸ ä»Šæ—¥ã®ãŠã¿ãã˜ ğŸ</h1>
  <p>ã‚ãªãŸã®ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
  <input type="date" id="birthdate" />
  <button onclick="drawOmikuji()">ãŠã¿ãã˜ã‚’å¼•ãï¼</button>

  <div id="result-wrapper">
    <div id="result"></div>
  </div>

  <script>
    const fortunes = [
      { type: "å¤§å‰", message: "é‹æ°—çµ¶å¥½èª¿ï¼ã™ã¹ã¦ãŒã†ã¾ãã„ãæ—¥ã§ã™ï¼" },
      { type: "ä¸­å‰", message: "è‰¯ã„ã“ã¨ãŒèµ·ã“ã‚‹äºˆæ„Ÿã€‚å‰å‘ãã«è¡Œå‹•ã—ã¦å‰ã€‚" },
      { type: "å°å‰", message: "å°ã•ãªå¹¸ã›ãŒè¨ªã‚Œãã†ã€‚æ„Ÿè¬ã®æ°—æŒã¡ã‚’å¿˜ã‚Œãšã«ã€‚" },
      { type: "å‰", message: "ç©ã‚„ã‹ãªä¸€æ—¥ã€‚è‡ªç„¶ä½“ã§éã”ã—ã¾ã—ã‚‡ã†ã€‚" },
      { type: "åŠå‰", message: "å°‘ã—ãšã¤é‹ãŒå‘ã„ã¦ãã¾ã™ã€‚ç„¦ã‚‰ãšã«ã€‚" },
      { type: "æœ«å‰", message: "ã¾ã èŠ½ã¯å‡ºãªã„ãŒã€åŠªåŠ›ã¯å ±ã‚ã‚Œã‚‹æ—¥ã€‚" },
      { type: "å‡¶", message: "æ³¨æ„ãŒå¿…è¦ãªæ—¥ã€‚ç„¡ç†ã›ãšæ…é‡ã«è¡Œå‹•ã‚’ã€‚" }
    ];

    const categories = {
      "ğŸ’– æ‹æ„›é‹": ["é‹å‘½ã®å‡ºä¼šã„ãŒã‚ã‚‹ã‹ã‚‚ï¼", "ç´ ç›´ãªæ°—æŒã¡ãŒä¼ã‚ã‚‹æ—¥ã€‚", "ç„¦ã‚‰ãšã˜ã£ãã‚Šã¨è·é›¢ã‚’ç¸®ã‚ã¦ã€‚", "ç›¸æ‰‹ã®æ°—æŒã¡ã‚’å°Šé‡ã—ã¦ã€‚", "èª¤è§£ã«æ³¨æ„ã€‚å†·é™ãªå¯¾å¿œã‚’ã€‚"],
      "ğŸ’¼ ä»•äº‹é‹": ["æ–°ã—ã„æŒ‘æˆ¦ãŒæˆåŠŸã®éµã€‚", "ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå…‰ã‚‹æ—¥ã€‚", "åœ°é“ãªåŠªåŠ›ãŒè©•ä¾¡ã•ã‚Œã‚‹ã€‚", "å‘¨å›²ã¨ã®èª¿å’Œã‚’å¤§åˆ‡ã«ã€‚", "æ…é‡ãªåˆ¤æ–­ãŒå‰ã€‚"],
      "ğŸ’° é‡‘é‹": ["æ€ã‚ã¬åå…¥ãŒã‚ã‚‹ã‹ã‚‚ï¼", "ç¯€ç´„ãŒåŠŸã‚’å¥ã™ã‚‹æ—¥ã€‚", "è²·ã„ç‰©ã¯è¨ˆç”»çš„ã«ã€‚", "è²¡å¸ƒã®ç´ã¯å°‘ã—å›ºã‚ã«ã€‚", "æŠ•è³‡ã¯æ…é‡ã«ã€‚"],
      "ğŸ©º å¥åº·é‹": ["ä½“èª¿è‰¯å¥½ï¼é‹å‹•ã«ã‚‚æœ€é©ã€‚", "ãƒãƒ©ãƒ³ã‚¹ã®è‰¯ã„é£Ÿäº‹ã‚’ã€‚", "æ—©å¯æ—©èµ·ãã§ãƒªã‚ºãƒ ã‚’æ•´ãˆã¦ã€‚", "ç–²ã‚ŒãŒå‡ºã‚„ã™ã„ã®ã§ä¼‘æ¯ã‚’ã€‚", "ç„¡ç†ã¯ç¦ç‰©ã€‚ä½“ã‚’åŠ´ã£ã¦ã€‚"],
      "ğŸ“š å‹‰å¼·é‹": ["é›†ä¸­åŠ›ãŒé«˜ã¾ã‚ŠæˆæœãŒå‡ºã‚‹ï¼", "æ–°ã—ã„çŸ¥è­˜ãŒèº«ã«ã¤ãæ—¥ã€‚", "å¾©ç¿’ã«åŠ›ã‚’å…¥ã‚Œã‚‹ã¨â—ã€‚", "èª˜æƒ‘ã«è² ã‘ãšã«åŠªåŠ›ã‚’ã€‚", "æ°—åˆ†è»¢æ›ã‚‚å¤§åˆ‡ã«ã€‚"],
      "ğŸ‘¥ å¯¾äººé‹": ["è‰¯ã„ç¸ãŒã¤ãªãŒã‚‹æ—¥ã€‚", "æ„Ÿè¬ã®æ°—æŒã¡ã‚’ä¼ãˆã¦å‰ã€‚", "èª¤è§£ãŒè§£ã‘ã¦é–¢ä¿‚ãŒæ·±ã¾ã‚‹ã€‚", "ç›¸æ‰‹ã®ç«‹å ´ã«ç«‹ã£ã¦è€ƒãˆã¦ã€‚", "ç„¡ç†ã«åˆã‚ã›ãšè‡ªåˆ†ã‚‰ã—ãã€‚"],
      "ğŸ§³ æ—…è¡Œé‹": ["ç´ æ•µãªç™ºè¦‹ãŒã‚ã‚Šãã†ï¼", "è¨ˆç”»çš„ã«å‹•ãã¨ã‚¹ãƒ ãƒ¼ã‚ºã€‚", "é“ä¸­ã«å¹¸é‹ãŒå¾…ã£ã¦ã„ã‚‹ã€‚", "å¿˜ã‚Œç‰©ã«æ³¨æ„ã—ã¦ã€‚", "ç„¡ç†ãªäºˆå®šã¯é¿ã‘ã¾ã—ã‚‡ã†ã€‚"],
      "ğŸ™ é¡˜ã„äº‹": ["é¡˜ã„ã¯å¶ã†å…†ã—ã‚ã‚Šï¼", "åŠªåŠ›ã™ã‚Œã°è¿‘ã¥ã‘ã‚‹ã€‚", "å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚Šãã†ã€‚", "å‘¨å›²ã®å”åŠ›ãŒéµã«ã€‚", "ä»Šã¯æº–å‚™ã®ã¨ãã€‚"],
      "ğŸ¨ ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ": ["èµ¤ã„å°ç‰©", "ãŠæ°—ã«å…¥ã‚Šã®æœ¬", "æ–°ã—ã„é´", "æ‰‹å¸³", "éŸ³æ¥½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼"]
    };

    function sumDigits(num) {
      return num.toString().split("").reduce((sum, d) => sum + parseInt(d), 0);
    }

    function drawOmikuji() {
      const birthInput = document.getElementById("birthdate").value;
      if (!birthInput) {
        alert("ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼");
        return;
      }

      const birthDate = new Date(birthInput);
      const now = new Date();

      const total =
        sumDigits(birthDate.getFullYear()) +
        sumDigits(birthDate.getMonth() + 1) +
        sumDigits(birthDate.getDate()) +
        sumDigits(now.getFullYear()) +
        sumDigits(now.getMonth() + 1) +
        sumDigits(now.getDate()) +
        sumDigits(now.getHours()) +
        sumDigits(now.getMinutes());

      const fortune = fortunes[total % fortunes.length];

      let html = `<div class="fortune-title">âœ¨ ${fortune.type} âœ¨</div><p>${fortune.message}</p><div class="fortune-section">`;

      let i = 0;
      for (const [title, messages] of Object.entries(categories)) {
        const msg = messages[(total + i) % messages.length];
        html += `<h3>${title}</h3><p>${msg}</p>`;
        i++;
      }

      html += `</div>`;

      const wrapper = document.getElementById("result-wrapper");
      const result = document.getElementById("result");
      result.classList.remove("show");
      wrapper.classList.remove("open");
      result.innerHTML = html;

      // Trigger animation
      setTimeout(() => {
        wrapper.classList.add("open");
        result.classList.add("show");
      }, 100);
    }
  </script>
</body>
</html>
